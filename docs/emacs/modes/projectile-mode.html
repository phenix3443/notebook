<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-04-26 日 10:54 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>projectile</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="liushangliang" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript" src="./script/org-info.js">

<script type="text/javascript" src="https://orgmode.org/org-info.js">
/**
 *
 * @source: https://orgmode.org/org-info.js
 *
 * @licstart  The following is the entire license notice for the
 *  JavaScript code in https://orgmode.org/org-info.js.
 *
 * Copyright (C) 2012-2019 Free Software Foundation, Inc.
 *
 *
 * The JavaScript code in this tag is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in https://orgmode.org/org-info.js.
 *
 */
</script>

<script type="text/javascript">

/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/

<!--/*--><![CDATA[/*><!--*/
org_html_manager.set("TOC_DEPTH", "4");
org_html_manager.set("LINK_HOME", "https://phenix3443.github.io/");
org_html_manager.set("LINK_UP", "");
org_html_manager.set("LOCAL_TOC", "1");
org_html_manager.set("VIEW_BUTTONS", "0");
org_html_manager.set("MOUSE_HINT", "underline");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "1");
org_html_manager.set("VIEW", "info");
org_html_manager.setup();  // activate after the parameters are set
/*]]>*///-->
</script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href=""> UP </a>
 |
 <a accesskey="H" href="https://phenix3443.github.io/"> HOME </a>
</div><div id="content">
<h1 class="title">projectile</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org940b1e4">1. 概述</a></li>
<li><a href="#org8c90803">2. 安装</a>
<ul>
<li><a href="#org4072c4e">2.1. Prerequisites</a></li>
<li><a href="#org5c7ec2b">2.2. Installation via package.el</a></li>
<li><a href="#orgd7c12f6">2.3. Installation via use-package</a></li>
<li><a href="#org0a0882d">2.4. Installation via el-get</a></li>
<li><a href="#org0922466">2.5. Installation on Debian and Ubuntu</a></li>
<li><a href="#orgf2e54e5">2.6. Emacs Prelude</a></li>
</ul>
</li>
<li><a href="#org7c1acd2">3. Usage</a>
<ul>
<li><a href="#orga6ab45f">3.1. Basic Usage</a></li>
<li><a href="#org1894a3e">3.2. Interactive Commands</a></li>
</ul>
</li>
<li><a href="#org9492ddf">4. Projects</a>
<ul>
<li><a href="#org363d59b">4.1. Supported Project Types</a></li>
<li><a href="#orgceddc3e">4.2. Version Control Systems</a></li>
<li><a href="#org0db06a7">4.3. File markers</a></li>
<li><a href="#org85f0f5d">4.4. Adding Custom Project Types</a></li>
<li><a href="#org63ce0ac">4.5. Returning Projectile Commands from a function</a></li>
<li><a href="#orgdf6f60e">4.6. Customizing project root files</a></li>
<li><a href="#org0c8616b">4.7. Ignoring files</a></li>
<li><a href="#org8a57771">4.8. File-local project root definitions</a></li>
<li><a href="#orge0742c4">4.9. Storing project settings</a>
<ul>
<li><a href="#org892a399">4.9.1. Configuring Projectile's Behavior</a></li>
<li><a href="#org1e52b37">4.9.2. Configure a Project's Compilation, Test and Run commands</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org9d6733c">5. Configuration</a>
<ul>
<li><a href="#org28c5b59">5.1. Project indexing method</a></li>
<li><a href="#org7f37073">5.2. Alien indexing</a></li>
<li><a href="#orgfeb83f6">5.3. Caching</a>
<ul>
<li><a href="#orgcbc27b1">5.3.1. Project files</a></li>
<li><a href="#org907932b">5.3.2. File exists cache</a></li>
</ul>
</li>
<li><a href="#org67c1a6e">5.4. Using Projectile everywhere</a></li>
<li><a href="#org7ea6c10">5.5. Switching projects</a>
<ul>
<li><a href="#org46471a8">5.5.1. projectile-find-file</a></li>
<li><a href="#orgfc99241">5.5.2. projectile-find-file-in-known-projects</a></li>
<li><a href="#org72ee950">5.5.3. projectile-find-file-dwim</a></li>
<li><a href="#org4162725">5.5.4. projectile-dired</a></li>
<li><a href="#orgde43fdf">5.5.5. projectile-find-dir</a></li>
</ul>
</li>
<li><a href="#org0268351">5.6. Completion Options</a>
<ul>
<li><a href="#orgd2b4eeb">5.6.1. Ido</a></li>
<li><a href="#orgf2b337b">5.6.2. Ivy (recommended)</a></li>
<li><a href="#org3963fd8">5.6.3. Basic (Emacs's default)</a></li>
<li><a href="#org869d776">5.6.4. Custom Completion Function</a></li>
<li><a href="#org4b38cdd">5.6.5. Regenerate tags</a></li>
</ul>
</li>
<li><a href="#org0448c82">5.7. Idle Timer</a></li>
<li><a href="#org42f9375">5.8. Mode line indicator</a></li>
</ul>
</li>
<li><a href="#orge208ec5">6. Extensions</a></li>
</ul>
</div>
</div>
<p>
详见 <a href="https://projectile.readthedocs.io/en/latest/">Projectile Manual</a>
</p>

<div id="outline-container-org940b1e4" class="outline-2">
<h2 id="org940b1e4"><span class="section-number-2">1</span> 概述</h2>
<div class="outline-text-2" id="text-1">
<p>
<a href="https://github.com/bbatsov/projectile">Projectile</a> 是 Emacs 的项目交互库。它的目标是在项目级别上提供一系列优秀的功能，而不会引入外部依赖。例如，有一个用纯 Emacs Lisp 编写的查找项目文件功能，而不使用 GNU find（但出于性能考虑，也存在由外部命令支持的索引机制）。
</p>

<p>
Projectile 以实用为目的：虽然考虑便携性，但是如果一些可用的外部工具可以大大加快某些任务，那么 Projectile 将利用它们。
</p>

<p>
该库提供简单的项目管理和导航。项目的概念非常简单：只是一个包含特殊文件的文件夹。目前包含 git，mercurial，darcs 和 bazaar repo的文件夹被视为项目。lein，maven，sbt，scons，rebar 和 bundler 项目也是如此。如果要将文件夹手动标记为项目，只需在其中创建一个空的 <code>.projectile</code> 文件。Projectile 的一些特点：
</p>
<ul class="org-ul">
<li>跳转到项目中的文件(c-p-f)。</li>
<li>跳转到项目中当前 point 处所指示的文件(c-p-g)。</li>
<li>跳转到项目中的目录(c-p-d)。</li>
<li>跳转到目录中的文件。</li>
<li>跳转到项目有关的 buffer(c-p-b)。</li>
<li>跳转到项目的测试(c-p-T)。</li>
<li>在同名但不同扩展名的文件间跳转（例如.h 和.cpp）(c-p-a)。</li>
<li>跳转到项目中最近浏览的文件(c-p-e)。</li>
<li>在工作的项目间切换。</li>
<li>关闭项目有关的 buffer(c-p-k)。</li>
<li>在项目范围内替换(c-p-r)。</li>
<li>在项目所有 buffer 中查找出现(c-p-o)。</li>
<li>在项目中查找(c-p-s-g)。</li>
<li>重新生成你项目的 etags 或 gtags。</li>
<li>在 dired 中访问项目(c-p-D)。</li>
<li>在项目上执行 make。</li>
<li>在项目的根目录执行命令(c-p-!)。</li>
<li>检查脏的存储库。</li>
<li>创建项目设置文件(dir-local-file)(c-p-E)</li>
</ul>
</div>
</div>

<div id="outline-container-org8c90803" class="outline-2">
<h2 id="org8c90803"><span class="section-number-2">2</span> 安装</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org4072c4e" class="outline-3">
<h3 id="org4072c4e"><span class="section-number-3">2.1</span> Prerequisites</h3>
</div>

<div id="outline-container-org5c7ec2b" class="outline-3">
<h3 id="org5c7ec2b"><span class="section-number-3">2.2</span> Installation via package.el</h3>
</div>

<div id="outline-container-orgd7c12f6" class="outline-3">
<h3 id="orgd7c12f6"><span class="section-number-3">2.3</span> Installation via use-package</h3>
<div class="outline-text-3" id="text-2-3">
<p>
如果要安装在主分支中找到的 Projectile 版本，请在 Emacs 初始化文件（.emacs 或 init.el）中声明以下内容：
</p>
<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #a1db00;">use-package</span> <span style="color: #5fafd7;">projectile</span>
  <span style="color: #d18aff;">:ensure</span> t
  <span style="color: #d18aff;">:config</span>
  (define-key projectile-mode-map (kbd <span style="color: #ff4ea3;">"s-p"</span>) 'projectile-command-map)
  (define-key projectile-mode-map (kbd <span style="color: #ff4ea3;">"C-c p"</span>) 'projectile-command-map)
  (projectile-mode +1))
</pre>
</div>
<p>
但是，如果您想要更加保守并且只使用 Projectile 的稳定版本，需要声明以下内容：
</p>
<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #a1db00;">use-package</span> <span style="color: #5fafd7;">projectile</span>
  <span style="color: #d18aff;">:ensure</span> t
  <span style="color: #d18aff;">:pin</span> melpa-stable
  <span style="color: #d18aff;">:config</span>
  (define-key projectile-mode-map (kbd <span style="color: #ff4ea3;">"s-p"</span>) 'projectile-command-map)
  (define-key projectile-mode-map (kbd <span style="color: #ff4ea3;">"C-c p"</span>) 'projectile-command-map)
  (projectile-mode +1))
</pre>
</div>
</div>
</div>

<div id="outline-container-org0a0882d" class="outline-3">
<h3 id="org0a0882d"><span class="section-number-3">2.4</span> Installation via el-get</h3>
</div>

<div id="outline-container-org0922466" class="outline-3">
<h3 id="org0922466"><span class="section-number-3">2.5</span> Installation on Debian and Ubuntu</h3>
</div>

<div id="outline-container-orgf2e54e5" class="outline-3">
<h3 id="orgf2e54e5"><span class="section-number-3">2.6</span> Emacs Prelude</h3>
<div class="outline-text-3" id="text-2-6">
<p>
Projectile 与 Emacs Prelude 捆绑在一起。如果是 Prelude 用户，Projectile 已经正确配置。
</p>
</div>
</div>
</div>

<div id="outline-container-org7c1acd2" class="outline-2">
<h2 id="org7c1acd2"><span class="section-number-2">3</span> Usage</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-orga6ab45f" class="outline-3">
<h3 id="orga6ab45f"><span class="section-number-3">3.1</span> Basic Usage</h3>
</div>

<div id="outline-container-org1894a3e" class="outline-3">
<h3 id="org1894a3e"><span class="section-number-3">3.2</span> Interactive Commands</h3>
</div>
</div>

<div id="outline-container-org9492ddf" class="outline-2">
<h2 id="org9492ddf"><span class="section-number-2">4</span> Projects</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org363d59b" class="outline-3">
<h3 id="org363d59b"><span class="section-number-3">4.1</span> Supported Project Types</h3>
<div class="outline-text-3" id="text-4-1">
<p>
Projectile 的主要目标之一是在不需要任何配置的情况下操作各种项目类型。为实现这一点，它包含许多项目检测逻辑和项目类型特定的逻辑。
</p>
</div>
</div>

<div id="outline-container-orgceddc3e" class="outline-3">
<h3 id="orgceddc3e"><span class="section-number-3">4.2</span> Version Control Systems</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Projectile 可讲大多数版本控制的仓库识别为一个项目。Projectile 支持：
</p>
<ul class="org-ul">
<li>Git</li>
<li>Mercurial</li>
<li>Bazaar</li>
<li>Subversion</li>
<li>CVS</li>
<li>Fossil</li>
<li>Darcs</li>
</ul>
</div>
</div>

<div id="outline-container-org0db06a7" class="outline-3">
<h3 id="org0db06a7"><span class="section-number-3">4.3</span> File markers</h3>
<div class="outline-text-3" id="text-4-3">
<p>
Projectile 将许多文件识别为表示项目的 root。通常这些文件是各种构建工具的配置文件。支持以下内容：
</p>

<table border="1" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" width="auto">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">File</th>
<th scope="col" class="org-left">Project Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">rebar.config</td>
<td class="org-left">Rebar project file</td>
</tr>

<tr>
<td class="org-left">project.clj</td>
<td class="org-left">Leiningen project file</td>
</tr>

<tr>
<td class="org-left">build.boot</td>
<td class="org-left">Boot-clj project file</td>
</tr>

<tr>
<td class="org-left">deps.edn</td>
<td class="org-left">Clojure CLI project file</td>
</tr>

<tr>
<td class="org-left">SConstruct</td>
<td class="org-left">Scons project file</td>
</tr>

<tr>
<td class="org-left">pom.xml</td>
<td class="org-left">Maven project file</td>
</tr>

<tr>
<td class="org-left">build.sbt</td>
<td class="org-left">SBT project file</td>
</tr>

<tr>
<td class="org-left">gradlew</td>
<td class="org-left">Gradle wrapper script</td>
</tr>

<tr>
<td class="org-left">build.gradle</td>
<td class="org-left">Gradle project file</td>
</tr>

<tr>
<td class="org-left">.ensime</td>
<td class="org-left">Ensime configuration file</td>
</tr>

<tr>
<td class="org-left">Gemfile</td>
<td class="org-left">Bundler file</td>
</tr>

<tr>
<td class="org-left">requirements.txt</td>
<td class="org-left">Pip file</td>
</tr>

<tr>
<td class="org-left">setup.py</td>
<td class="org-left">Setuptools file</td>
</tr>

<tr>
<td class="org-left">tox.ini</td>
<td class="org-left">Tox file</td>
</tr>

<tr>
<td class="org-left">composer.json</td>
<td class="org-left">Composer project file</td>
</tr>

<tr>
<td class="org-left">Cargo.toml</td>
<td class="org-left">Cargo project file</td>
</tr>

<tr>
<td class="org-left">mix.exs</td>
<td class="org-left">Elixir mix project file</td>
</tr>

<tr>
<td class="org-left">stack.yaml</td>
<td class="org-left">Haskell's stack tool based project</td>
</tr>

<tr>
<td class="org-left">info.rkt</td>
<td class="org-left">Racket package description file</td>
</tr>

<tr>
<td class="org-left">DESCRIPTION</td>
<td class="org-left">R package description file</td>
</tr>

<tr>
<td class="org-left">TAGS</td>
<td class="org-left">etags/ctags are usually in the root of project</td>
</tr>

<tr>
<td class="org-left">GTAGS</td>
<td class="org-left">GNU Global tags</td>
</tr>

<tr>
<td class="org-left">configure.in</td>
<td class="org-left">autoconf old style</td>
</tr>

<tr>
<td class="org-left">configure.ac</td>
<td class="org-left">autoconf new style</td>
</tr>

<tr>
<td class="org-left">cscope.out</td>
<td class="org-left">cscope</td>
</tr>

<tr>
<td class="org-left">Makefile</td>
<td class="org-left">Make</td>
</tr>
</tbody>
</table>

<p>
Projectile 自己的 <code>.projectile</code> 既可以作为项目标记，也可以作为配置文件。将在本节后面详细讨论。
</p>
</div>
</div>

<div id="outline-container-org85f0f5d" class="outline-3">
<h3 id="org85f0f5d"><span class="section-number-3">4.4</span> Adding Custom Project Types</h3>
<div class="outline-text-3" id="text-4-4">
<p>
如果没有正确识别正在处理的项目，或者想定制项目类型，则可以在 Emacs 初始化代码中添加以下内容：
</p>
<div class="org-src-container">
<pre class="src src-elisp">(projectile-register-project-type 'npm '(<span style="color: #ff4ea3;">"package.json"</span>)
                  <span style="color: #d18aff;">:compile</span> <span style="color: #ff4ea3;">"npm install"</span>
                  <span style="color: #d18aff;">:test</span> <span style="color: #ff4ea3;">"npm test"</span>
                  <span style="color: #d18aff;">:run</span> <span style="color: #ff4ea3;">"npm start"</span>
                  <span style="color: #d18aff;">:test-suffix</span> <span style="color: #ff4ea3;">".spec"</span>)

</pre>
</div>

<table border="1" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" width="auto">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Option</th>
<th scope="col" class="org-left">Documentation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">:compilation-dir</td>
<td class="org-left">A path, relative to the project root, from where to run the tests and compilation commands.</td>
</tr>

<tr>
<td class="org-left">:compile</td>
<td class="org-left">A command to compile the project.</td>
</tr>

<tr>
<td class="org-left">:configure</td>
<td class="org-left">A command to configure the project. %s will be substituted with the project root.</td>
</tr>

<tr>
<td class="org-left">:run</td>
<td class="org-left">A command to run the project.</td>
</tr>

<tr>
<td class="org-left">:src-dir</td>
<td class="org-left">A path, relative to the project root, where the source code lives.</td>
</tr>

<tr>
<td class="org-left">:test</td>
<td class="org-left">A command to test the project.</td>
</tr>

<tr>
<td class="org-left">:test-dir</td>
<td class="org-left">A path, relative to the project root, where the test code lives.</td>
</tr>

<tr>
<td class="org-left">:test-prefix</td>
<td class="org-left">A prefix to generate test files names.</td>
</tr>

<tr>
<td class="org-left">:test-suffix</td>
<td class="org-left">A suffix to generate test files names.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org63ce0ac" class="outline-3">
<h3 id="org63ce0ac"><span class="section-number-3">4.5</span> Returning Projectile Commands from a function</h3>
<div class="outline-text-3" id="text-4-5">
<p>
如果要动态定义编译命令，可以在项目类型定义中传递函数的符号引用：
</p>
<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #a1db00;">defun</span> <span style="color: #ffd700;">my/compile-command</span> ()
  <span style="color: #ff4b4b;">"Returns a String representing the compile command to run for the given context"</span>
  (<span style="color: #a1db00;">cond</span>
   ((<span style="color: #a1db00;">and</span> (eq major-mode 'java-mode)
         (not (string-match-p (regexp-quote <span style="color: #ff4ea3;">"\\.*/test/\\.*"</span>) (buffer-file-name (current-buffer)))))
    <span style="color: #ff4ea3;">"./gradlew build"</span>)
   ((eq major-mode 'web-mode)
    <span style="color: #ff4ea3;">"./gradlew compile-templates"</span>)
   ))

(<span style="color: #a1db00;">defun</span> <span style="color: #ffd700;">my/test-command</span> ()
  <span style="color: #ff4b4b;">"Returns a String representing the test command to run for the given context"</span>
  (<span style="color: #a1db00;">cond</span>
   ((eq major-mode 'js-mode) <span style="color: #ff4ea3;">"grunt test"</span>) <span style="color: #6c6c6c; font-style: italic;">;; </span><span style="color: #6c6c6c; font-style: italic;">Test the JS of the project</span>
   ((eq major-mode 'java-mode) <span style="color: #ff4ea3;">"./gradlew test"</span>) <span style="color: #6c6c6c; font-style: italic;">;; </span><span style="color: #6c6c6c; font-style: italic;">Test the Java code of the project</span>
   ((eq major-mode 'my-mode) <span style="color: #ff4ea3;">"special-command.sh"</span>) <span style="color: #6c6c6c; font-style: italic;">;; </span><span style="color: #6c6c6c; font-style: italic;">Even Special conditions/test-sets can be covered</span>
   ))

(projectile-register-project-type 'has-command-at-point '(<span style="color: #ff4ea3;">"file.txt"</span>)
                                  <span style="color: #d18aff;">:compile</span> 'my/compile-command
                                  <span style="color: #d18aff;">:test</span> 'my/test-command)
</pre>
</div>

<p>
如果现在导航到 <code>./tests/</code> 目录下具有 <code>*.java</code> 扩展名的文件，并点击 <code>C-c c p</code> ，将看到 <code>./gradlew build</code> 作为建议。 如果要导航到 HTML 文件，编译命令将切换到 <code>./gradlew compile-templates</code> 。
</p>

<p>
可同样设置的还有：
</p>
<ul class="org-ul">
<li><code>:configure</code></li>
<li><code>:compile</code></li>
<li><code>:compilation-dir</code></li>
<li><code>:run</code></li>
</ul>

<p>
请注意，函数必须返回一个字符串才能正常工作。
</p>
</div>
</div>

<div id="outline-container-orgdf6f60e" class="outline-3">
<h3 id="orgdf6f60e"><span class="section-number-3">4.6</span> Customizing project root files</h3>
<div class="outline-text-3" id="text-4-6">
<p>
可以设置 <code>projectile-project-root-files, projectile-project-root-files-top-down-recurring, projectile-project-root-files-bottom-up and projectile-project-root-files-functions</code> 的值来定制如何识别项目的 root。
</p>
</div>
</div>

<div id="outline-container-org0c8616b" class="outline-3">
<h3 id="org0c8616b"><span class="section-number-3">4.7</span> Ignoring files</h3>
<div class="outline-text-3" id="text-4-7">
<p>
注意：使用 alien 方法索引项目时，忽略.projectile 的内容。
</p>

<p>
如果想 Projectile 在索引项目时忽略某些文件，可以在 <code>.projectile</code> 文件中添加要忽略的路径，其中所有相对于根目录的路径都以 <code>/</code> 开头。忽略的项目都应该以 <code>-</code> 符号开头。 或者，没有任何前缀也意味着忽略后面的目录或文件模式。 以下是典型 Rails 应用程序的示例：
</p>
<pre class="example">
-/log
-/tmp
-/vendor
-/public/uploads
</pre>

<p>
这将忽略仅在项目根目录下的文件夹。Projectile 还支持相对路径名忽略：
</p>
<pre class="example">
-tmp
-*.rb
-*.yml
-models
</pre>

<p>
也可以忽略除某些子目录之外的所有内容。 这在选择要保留的目录比选择要忽略的目录更容易时很有用，尽管您可以同时执行这两个操作。 选择要保留的目录，这意味着其他所有内容都将被忽略。
</p>
<pre class="example">
+/src/foo
+/tests/foo
</pre>
<p>
注意：此时只能包含子目录，而不能包含文件模式。
</p>

<p>
如果目录同时被指定为保留和忽略，则首先应用要保留，从而限制考虑的文件。然后将要忽略的路径和模式应用于该集合。
</p>

<p>
最后，可以覆盖被忽略的文件。当 VCS 忽略的某些文件应被视为项目的一部分时，这尤其有用：
</p>
<pre class="example">
!/src/foo
!*.yml
</pre>
</div>
</div>

<div id="outline-container-org8a57771" class="outline-3">
<h3 id="org8a57771"><span class="section-number-3">4.8</span> File-local project root definitions</h3>
<div class="outline-text-3" id="text-4-8">
<p>
如果要用指定文件覆盖 projectile 项目的 root，可以设置文件局部变量 projectile-project-root。 如果一个项目中的文件与另一个项目相关（例如，一个 git 仓库中的 Org 文件与其他项目相对应），这将非常有用。
</p>
</div>
</div>

<div id="outline-container-orge0742c4" class="outline-3">
<h3 id="orge0742c4"><span class="section-number-3">4.9</span> Storing project settings</h3>
<div class="outline-text-3" id="text-4-9">
<p>
即使相同的语言项目也有可能各不相同：编码样式、自动完成源等。如果需要根据所选项目设置一些变量，可以使用名为 <a href="http://www.gnu.org/software/emacs/manual/html_node/emacs/Directory-Variables.html">Per-directory Local</a> 的 Emacs 标准功能。要使用它，您必须在项目目录中创建名为 <code>.dir-locals.el</code>  的文件（由常量 <code>dir-locals-file</code> 指定）。 此文件包含内容与以下类似：
</p>

<div class="org-src-container">
<pre class="src src-elisp">((nil . ((secret-ftp-password . <span style="color: #ff4ea3;">"secret"</span>)
         (compile-command . <span style="color: #ff4ea3;">"make target-x"</span>)
         (eval . (<span style="color: #a1db00;">progn</span>
                   (<span style="color: #a1db00;">defun</span> <span style="color: #ffd700;">my-project-specific-function</span> ()
                     <span style="color: #6c6c6c; font-style: italic;">;; </span><span style="color: #6c6c6c; font-style: italic;">...</span>
                     )))))
 (c-mode . ((c-file-style . <span style="color: #ff4ea3;">"BSD"</span>))))
</pre>
</div>

<p>
使用键 nil 引用的顶级 alist 成员适用于整个项目。 名为 eval 的键将会求值。在上面的示例中，它用于创建函数。 它也可以用于将这样的函数添加到键映射中。
</p>

<p>
还可以使用 <code>s-p E（M-x projectile-edit-dir-locals RET）</code> 快速访问或创建 <code>dir-locals-file</code> 。
</p>

<p>
以下是如何在 Projectile 中使用此功能的几个示例。
</p>
</div>

<div id="outline-container-org892a399" class="outline-4">
<h4 id="org892a399"><span class="section-number-4">4.9.1</span> Configuring Projectile's Behavior</h4>
<div class="outline-text-4" id="text-4-9-1">
<p>
Projectile 有许多变量（通过 defcustom），允许用户自定义其行为。目录变量可用来基于每个项目设置这些自定义。
</p>

<p>
可以通过以下方式为项目启用缓存：
</p>

<div class="org-src-container">
<pre class="src src-elisp">((nil . ((projectile-enable-caching . t))))
</pre>
</div>

<p>
如果某个项目有一个希望 Projectile 忽略的文件，可以通过以下方式自定义 Projectile：
</p>
<div class="org-src-container">
<pre class="src src-elisp">((nil . ((projectile-globally-ignored-files . (<span style="color: #ff4ea3;">"MyBinaryFile"</span>)))))
</pre>
</div>

<p>
如果想包装 Projectile 用于列出存储库中文件的 git 命令，可以这样做
</p>
<div class="org-src-container">
<pre class="src src-elisp">((nil . ((projectile-git-command . <span style="color: #ff4ea3;">"/path/to/other/git ls-files -zco --exclude-standard"</span>))))
</pre>
</div>

<p>
如果要使用不同于 Projectile 命名项目的名称，可以使用以下内容对其进行自定义：
</p>
<div class="org-src-container">
<pre class="src src-elisp">((nil . ((projectile-project-name . <span style="color: #ff4ea3;">"your-project-name-here"</span>))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1e52b37" class="outline-4">
<h4 id="org1e52b37"><span class="section-number-4">4.9.2</span> Configure a Project's Compilation, Test and Run commands</h4>
<div class="outline-text-4" id="text-4-9-2">
<p>
通过 <code>.dir-locals.el</code> 自定义命令：
</p>
<ul class="org-ul">
<li>for compilation - projectile-project-compilation-cmd</li>
<li>for testing - projectile-project-test-cmd</li>
<li>for running - projectile-project-run-cmd</li>
</ul>

<p>
当这些变量的默认值为 nil 时，Projectile 将运行当前项目类型的默认命令。可以通过将它们设置为运行外部命令的字符串或 Emacs Lisp 函数来覆盖此行为：
</p>
<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #a1db00;">setq</span> projectile-test-cmd #'custom-test-function)
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org9d6733c" class="outline-2">
<h2 id="org9d6733c"><span class="section-number-2">5</span> Configuration</h2>
<div class="outline-text-2" id="text-5">
<p>
Projectile 非常易于配置。几乎可以调整或扩展其行为的每个方面。
</p>

<p>
在本节中，将介绍一些可能需要微调的常用配置，以使 Projectile 更好地适应工作流程。
</p>
</div>

<div id="outline-container-org28c5b59" class="outline-3">
<h3 id="org28c5b59"><span class="section-number-3">5.1</span> Project indexing method</h3>
<div class="outline-text-3" id="text-5-1">
<p>
Projectile 有三种操作模式 - 一种是可移植的，使用 Emacs Lisp 实现（因此它是 Emacs 原生，被称为 native 索引方法），另外两种（hybrid 和 alien）依赖于外部命令，如 find，git 等 获取项目中的文件列表。
</p>

<p>
alien 索引方法优化了 hybrid 索引方法的速度。 这意味着 Projectile 不会对外部命令返回的文件进行任何处理，将获得最大的性能。这种行为适用于大多数人，因为他们通常会在他们的 VCS 配置中放弃忽略（例如.gitignore），并且不会关心 Projectile 可能提供的任何其他 ignores/unignores/sorting。
</p>

<p>
默认情况下，alien 方法用于除 Windows 之外的所有操作系统。Projectile 2.0 之前 hybrid 曾经是默认设置。
</p>

<p>
要在所有操作系统中强制使用 native 索引：
</p>
<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #a1db00;">setq</span> projectile-indexing-method 'native)
</pre>
</div>

<p>
强制在所有操作系统中使用 hybrid 索引：
</p>
<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #a1db00;">setq</span> projectile-indexing-method 'hybrid)
</pre>
</div>

<p>
强制在所有操作系统中使用 alien 索引：
</p>
<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #a1db00;">setq</span> projectile-indexing-method 'alien)
</pre>
</div>

<p>
Windows 中这可以显著加速 Projectile（特别是在大型项目中）。 这种方法的缺点是它在 Windows 系统上得不到很好的支持，因为它需要在那里设置一些 Unix 实用程序。 如果出现问题，可以使用 native 索引模式。
</p>
</div>
</div>

<div id="outline-container-org7f37073" class="outline-3">
<h3 id="org7f37073"><span class="section-number-3">5.2</span> Alien indexing</h3>
<div class="outline-text-3" id="text-5-2">
<p>
alien 索引以一种非常简单的方式工作 - 它只是执行一个返回项目中文件列表的命令。 对于版本控制的项目，默认情况下，Projectile 将使用 VCS 本身来获取文件列表。例如，Projectile 用于 Git 项目的命令：
</p>
<div class="org-src-container">
<pre class="src src-sh">git ls-files -zco --exclude-standard
</pre>
</div>

<p>
对于支持的 VCS，都有一个匹配的 Projectile 命令调用它（例如 projectile-git-command，projectile-hg-command 等）。
</p>

<p>
警告：如果决定调整这些命令，请记住命令应该总是返回相对于项目根目录的文件列表，结果文件列表应该是 0 分隔（而不是换行符分隔）。
</p>

<p>
对于非版本控制的项目，Projectile 将调用 projectile-generic-command 中的命令。默认情况下是：
</p>
<div class="org-src-container">
<pre class="src src-sh">find . -type f -print0
</pre>
</div>

<p>
安装 <a href="https://github.com/sharkdp/fd">fd</a> 并用其替代 <code>git ls-files</code> （fd 理解 <code>.gitignore</code> ）和 <code>find</code> 是个好主意。
</p>
</div>
</div>

<div id="outline-container-orgfeb83f6" class="outline-3">
<h3 id="orgfeb83f6"><span class="section-number-3">5.3</span> Caching</h3>
<div class="outline-text-3" id="text-5-3">
</div>
<div id="outline-container-orgcbc27b1" class="outline-4">
<h4 id="orgcbc27b1"><span class="section-number-4">5.3.1</span> Project files</h4>
<div class="outline-text-4" id="text-5-3-1">
<p>
由于索引一个大项目并不是很快（特别使用 Emacs Lisp），Projectile 支持缓存项目的文件。默认情况下，启用 native 索引就会启用缓存。
</p>

<p>
使用以下代码段无条件启用缓存：
</p>
<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #a1db00;">setq</span> projectile-enable-caching t)
</pre>
</div>

<p>
此时，可以尝试使用诸如 <code>s-p f (M-x projectile-find-file RET)</code> 之类的 Projectile 命令。
</p>

<p>
在提示跳转到文件之前，运行 <code>C-u s-p f</code> 将使缓存无效。
</p>

<p>
按 <code>s-p z</code> 会将当前访问的文件添加到当前项目的缓存中。 通常，在 Emacs 外部创建的文件将在第一次打开时自动添加到缓存中。
</p>

<p>
项目缓存是持久的，将在 Emacs 重新启动期间保留。
</p>

<p>
可以使用 <code>M-x projectile-purge-file-from-cache</code> 从缓存中清除单个文件, <code>M-x projectile-purge-dir-from-cache</code> 的从缓存中清除整个目录。
</p>
</div>
</div>

<div id="outline-container-org907932b" class="outline-4">
<h4 id="org907932b"><span class="section-number-4">5.3.2</span> File exists cache</h4>
<div class="outline-text-4" id="text-5-3-2">
<p>
Projectile 执行许多文件存在性检查，以识别项目根目录。通常情况下这很好，但在某些情况下，文件系统速度比平常慢得多，这可能导致在打开文件和浏览目录时 Emacs “冻结” 很长一段时间。
</p>

<p>
最常见的情形是使用 <code>TRAMP/ssh</code> 连接远程系统。默认情况下，缓存所有远程文件的存在性检查。
</p>

<p>
不缓存远程文件存在性检查：
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #a1db00;">setq</span> projectile-file-exists-remote-cache-expire nil)
</pre>
</div>

<p>
设置远程文件存在检查缓存 10 分钟后过期：
</p>
<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #a1db00;">setq</span> projectile-file-exists-remote-cache-expire (* 10 60))
</pre>
</div>

<p>
还可以为本地文件系统启用缓存，但通常没必要：
</p>
<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #a1db00;">setq</span> projectile-file-exists-local-cache-expire (* 5 60))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org67c1a6e" class="outline-3">
<h3 id="org67c1a6e"><span class="section-number-3">5.4</span> Using Projectile everywhere</h3>
<div class="outline-text-3" id="text-5-4">
<p>
如果希望在每个目录中都使用 Projectile（即使没有项目文件）：
</p>
<div class="org-src-container">
<pre class="src src-elisp">   (<span style="color: #a1db00;">setq</span> projectile-require-project-root nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-org7ea6c10" class="outline-3">
<h3 id="org7ea6c10"><span class="section-number-3">5.5</span> Switching projects</h3>
<div class="outline-text-3" id="text-5-5">
<p>
当运行 projectile-switch-project（s-p p）时，Projectile 会调用 projectile-switch-project-action 中指定的命令（默认情况下它是 projectile-find-file）。
</p>

<p>
使用前缀参数（C-u s-p p）调用命令将触发 Projectile Commander，可以快速访问可能要在项目上调用的大多数常用命令。
</p>

<p>
根据您的个人工作流程和习惯，可能需要改变 <code>projectile-switch-project-action</code> 的值：
</p>
</div>

<div id="outline-container-org46471a8" class="outline-4">
<h4 id="org46471a8"><span class="section-number-4">5.5.1</span> projectile-find-file</h4>
<div class="outline-text-4" id="text-5-5-1">
<p>
默认值。使用此设置，一旦通过 Projectile 的补全系统选择了项目（见下文），将在补全系统中继续选择要访问的文件。projectile-find-file 能够检索项目根目录下的所有子项目中的文件，例如 Git 子模块。目前仅支持 Git。将来会增加对其他 VCS 的支持。
</p>
</div>
</div>

<div id="outline-container-orgfc99241" class="outline-4">
<h4 id="orgfc99241"><span class="section-number-4">5.5.2</span> projectile-find-file-in-known-projects</h4>
<div class="outline-text-4" id="text-5-5-2">
<p>
与 projectile-find-file 类似，但列出了所有已知项目中的所有文件。由于文件总数可能很大，启用缓存有助于后续使用。
</p>
</div>
</div>

<div id="outline-container-org72ee950" class="outline-4">
<h4 id="org72ee950"><span class="section-number-4">5.5.3</span> projectile-find-file-dwim</h4>
<div class="outline-text-4" id="text-5-5-3">
<p>
如果 point 在文件路径上，Projectile 首先尝试在项目中搜索该文件：
</p>
<ul class="org-ul">
<li>如果它只找到一个文件，它会立即切换到该文件。即使文件名不完整，但当前项目中只有一个文件与 point 处的文件名匹配也会生效。例如，如果只有一个名为 <code>projectile/projectile.el</code> 的文件，但当前文件名是 <code>projectile/proj</code> （不完整），则 projectile-find-file 仍会立即切换到 <code>projectile/projectile.el</code> ，因为这是唯一匹配的文件名。</li>

<li>如果找到文件列表，则会显示列表以供选择。当文件名在项目中出现多个文件名时，或者 point 上的文件名是项目中两个以上文件的前缀时，将显示文件列表。例如，如果在 <code>projectile/</code> 之类的文件路径上执行 projectile-find-file，它会列出该目录的内容。如果它在诸如 <code>projectile/a</code> 的部分文件名上执行，则会显示该目录中具有字符 <code>a</code> 的文件列表。</li>

<li>如果找不到任何内容，则显示项目中所有文件的列表以供选择。</li>
</ul>
</div>
</div>

<div id="outline-container-org4162725" class="outline-4">
<h4 id="org4162725"><span class="section-number-4">5.5.4</span> projectile-dired</h4>
<div class="outline-text-4" id="text-5-5-4">
<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #a1db00;">setq</span> projectile-switch-project-action&#65283;'projectile-dired)
</pre>
</div>

<p>
使用此设置，选择项目后，项目的顶级目录将立即在 dired 缓冲区中打开。
</p>
</div>
</div>

<div id="outline-container-orgde43fdf" class="outline-4">
<h4 id="orgde43fdf"><span class="section-number-4">5.5.5</span> projectile-find-dir</h4>
<div class="outline-text-4" id="text-5-5-5">
<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #a1db00;">setq</span> projectile-switch-project-action&#65283;'projectile-find-dir)
</pre>
</div>
<p>
使用此设置，选择项目后，将保留在 Projectile 的补全系统中以选择项目的子目录，然后在 dired 缓冲区中打开该子目录。如果使用此设置，可能还需要设置以下代码允许选择顶级目录：
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #a1db00;">setq</span> projectile-find-dir-includes-top-level t)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org0268351" class="outline-3">
<h3 id="org0268351"><span class="section-number-3">5.6</span> Completion Options</h3>
<div class="outline-text-3" id="text-5-6">
</div>
<div id="outline-container-orgd2b4eeb" class="outline-4">
<h4 id="orgd2b4eeb"><span class="section-number-4">5.6.1</span> Ido</h4>
<div class="outline-text-4" id="text-5-6-1">
<p>
Projectile 默认使用 ido 作为其补全系统。ido 非常受欢迎，内置于 Emacs 中。
</p>

<p>
如果要使用 ido 补全，强烈建议安装可选的 flx-ido 软件包，它为 ido 内置的 flex 匹配提供了更强大的替代方案。
</p>
</div>
</div>

<div id="outline-container-orgf2b337b" class="outline-4">
<h4 id="orgf2b337b"><span class="section-number-4">5.6.2</span> Ivy (recommended)</h4>
<div class="outline-text-4" id="text-5-6-2">
<p>
另外一个补全选项是<a href="https://github.com/abo-abo/swiper">ivy</a>：
</p>
<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #a1db00;">setq</span> projectile-completion-system 'ivy)
</pre>
</div>
</div>
</div>

<div id="outline-container-org3963fd8" class="outline-4">
<h4 id="org3963fd8"><span class="section-number-4">5.6.3</span> Basic (Emacs's default)</h4>
<div class="outline-text-4" id="text-5-6-3">
<p>
如果你不喜欢 ido 和常春藤你可以使用常规补全：
</p>
<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #a1db00;">setq</span> projectile-completion-system 'default)
</pre>
</div>
</div>
</div>

<div id="outline-container-org869d776" class="outline-4">
<h4 id="org869d776"><span class="section-number-4">5.6.4</span> Custom Completion Function</h4>
<div class="outline-text-4" id="text-5-6-4">
<p>
还可以将 projectile-completion-system 设置为函数：
</p>
<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #a1db00;">setq</span> projectile-completion-system #'my-custom-completion-fn)
(<span style="color: #a1db00;">setq</span> projectile-completion-system
      (<span style="color: #a1db00;">lambda</span> (prompt choices)
        <span style="color: #6c6c6c; font-style: italic;">;; </span><span style="color: #6c6c6c; font-style: italic;">...</span>
        ))
</pre>
</div>
<p>
自定义完成功能的一个<a href="https://gist.github.com/rejeep/5933343">示例</a>，它仅显示文件名（不包括路径），如果选择的文件不唯一，则会显示另一个名称相对于项目根目录的补全。
</p>
</div>
</div>

<div id="outline-container-org4b38cdd" class="outline-4">
<h4 id="org4b38cdd"><span class="section-number-4">5.6.5</span> Regenerate tags</h4>
<div class="outline-text-4" id="text-5-6-5">
<p>
为了能够通过 projectile-tags-command 重新生成项目的标签，应该安装 <a href="http://ctags.sourceforge.net/">Exuberant Ctags</a> 并将其添加到 PATH，而不是与 Emacs 发行版一起提供的普通 ctags。
</p>

<p>
注意：Exuberant Ctags 已经停止开发，使用 <a href="https://github.com/universal-ctags/ctags">Universal-ctags</a> 替代。
</p>
</div>
</div>
</div>

<div id="outline-container-org0448c82" class="outline-3">
<h3 id="org0448c82"><span class="section-number-3">5.7</span> Idle Timer</h3>
<div class="outline-text-3" id="text-5-7">
<p>
每当 Emacs 在该项目中空闲 projectile-idle-timer-seconds 配置时间（默认为 30 秒），可以运行配置 projectile-idle-timer-hook。要启用此功能，请运行：
</p>

<div class="org-src-container">
<pre class="src src-elisp">(add-hook 'projectile-idle-timer-hook #'my-projectile-idle-timer-function)
</pre>
</div>
</div>
</div>

<div id="outline-container-org42f9375" class="outline-3">
<h3 id="org42f9375"><span class="section-number-3">5.8</span> Mode line indicator</h3>
<div class="outline-text-3" id="text-5-8">
<p>
默认情况下，Projectile 的 minor mode 指示器以 “Projectile [ProjectName：ProjectType]” 的形式出现。可以通过几个自定义变量进行配置：
</p>
<ul class="org-ul">
<li><code>projectile-mode-line-prefix</code> （默认为 “Projectile”）控制 mode-line 的静态部分。</li>
<li><code>projectile-dynamic-mode-line</code> （默认为 t）控制是否显示 mode-line 的项目名称和类型部分。</li>
<li><p>
<code>projectile-mode-line-function</code> （默认为 projectile-default-mode-line）控制要生成 mode-line 的实际调用的函数。如果想显示不同的信息，应该提供一个自定义函数来替换默认值，例如：
</p>
<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #a1db00;">setq</span> projectile-mode-line-function '(lambda () (format <span style="color: #ff4ea3;">" Proj[%s]"</span> (projectile-project-name))))
</pre>
</div></li>
</ul>

<p>
注意：编辑远程文件时（通过 TRAMP），项目名称和类型不会出现，因为重新计算项目名称是一个相当慢的操作，并且会减慢打开文件的速度。它们也不会出现在非文件缓冲区中，因为它们是通过 find-file-hook 更新的。
</p>
</div>
</div>
</div>

<div id="outline-container-orge208ec5" class="outline-2">
<h2 id="orge208ec5"><span class="section-number-2">6</span> Extensions</h2>
<div class="outline-text-2" id="text-6">
<p>
有许多软件包构建在 Projectile 提供的基本功能之上：
</p>
<ul class="org-ul">
<li><a href="https://github.com/ericdanan/counsel-projectile">counsel-projectile</a> provides Ivy integration</li>
<li><a href="https://github.com/bbatsov/helm-projectile">helm-projectile</a> provides Helm integration</li>
<li><a href="https://github.com/bbatsov/persp-projectile">persp-projectile</a> provides perspective.el integration</li>
<li><a href="https://github.com/asok/projectile-rails">projectile-rails</a> provides extra functionality for Ruby on Rails projects</li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: liushangliang</p>
<p class="email">Email: <a href="mailto:phenix3443+github@gmail.com">phenix3443+github@gmail.com</a></p>
<p class="date">Created: 2020-04-26 日 10:54</p>
<p class="validation"></p>
</div>
</body>
</html>
