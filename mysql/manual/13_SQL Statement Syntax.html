<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-03-05 四 17:01 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SQL Statement Syntax</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="刘尚亮" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript" src="./script/org-info.js">

<script type="text/javascript" src="https://orgmode.org/org-info.js">
/**
 *
 * @source: https://orgmode.org/org-info.js
 *
 * @licstart  The following is the entire license notice for the
 *  JavaScript code in https://orgmode.org/org-info.js.
 *
 * Copyright (C) 2012-2019 Free Software Foundation, Inc.
 *
 *
 * The JavaScript code in this tag is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in https://orgmode.org/org-info.js.
 *
 */
</script>

<script type="text/javascript">

/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/

<!--/*--><![CDATA[/*><!--*/
org_html_manager.set("TOC_DEPTH", "4");
org_html_manager.set("LINK_HOME", "https://phenix3443.github.io/");
org_html_manager.set("LINK_UP", "");
org_html_manager.set("LOCAL_TOC", "1");
org_html_manager.set("VIEW_BUTTONS", "0");
org_html_manager.set("MOUSE_HINT", "underline");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "1");
org_html_manager.set("VIEW", "info");
org_html_manager.setup();  // activate after the parameters are set
/*]]>*///-->
</script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href=""> UP </a>
 |
 <a accesskey="H" href="https://phenix3443.github.io/"> HOME </a>
</div><div id="content">
<h1 class="title">SQL Statement Syntax</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orga9429f7">1. SQL Statement Syntax</a>
<ul>
<li><a href="#org7846407">1.1. 13.1 Data Definition Statements</a>
<ul>
<li><a href="#orgc4ccf19">1.1.1. 13.1.1 ALTER DATABASE Syntax</a></li>
<li><a href="#org9e2b1e0">1.1.2. 13.1.2 ALTER EVENT Syntax</a></li>
<li><a href="#orgf62291e">1.1.3. 13.1.3 ALTER LOGFILE GROUP Syntax</a></li>
<li><a href="#org49f5f2f">1.1.4. 13.1.4 ALTER FUNCTION Syntax</a></li>
<li><a href="#orgd3082dc">1.1.5. 13.1.5 ALTER PROCEDURE Syntax</a></li>
<li><a href="#org2d3f5ea">1.1.6. 13.1.6 ALTER SERVER Syntax</a></li>
<li><a href="#org4189b59">1.1.7. 13.1.7 ALTER TABLE Syntax</a></li>
<li><a href="#org1e312cc">1.1.8. 13.1.8 ALTER TABLESPACE Syntax</a></li>
<li><a href="#org5e513d6">1.1.9. 13.1.9 ALTER VIEW Syntax</a></li>
<li><a href="#org308d1e0">1.1.10. 13.1.10 CREATE DATABASE Syntax</a></li>
<li><a href="#orgf4fcaa1">1.1.11. 13.1.11 CREATE EVENT Syntax</a></li>
<li><a href="#org6b679c4">1.1.12. 13.1.12 CREATE FUNCTION Syntax</a></li>
<li><a href="#orgb03ce47">1.1.13. 13.1.13 CREATE INDEX Syntax</a></li>
<li><a href="#org6bd2353">1.1.14. 13.1.14 CREATE LOGFILE GROUP Syntax</a></li>
<li><a href="#org30c810d">1.1.15. 13.1.15 CREATE PROCEDURE and CREATE FUNCTION Syntax</a></li>
<li><a href="#org74bfffe">1.1.16. 13.1.16 CREATE SERVER Syntax</a></li>
<li><a href="#org50f83b9">1.1.17. 13.1.17 CREATE TABLE Syntax</a></li>
<li><a href="#org306e5aa">1.1.18. 13.1.18 CREATE TABLESPACE Syntax</a></li>
<li><a href="#orge564291">1.1.19. 13.1.19 CREATE TRIGGER Syntax</a></li>
<li><a href="#org1889df2">1.1.20. 13.1.20 CREATE VIEW Syntax</a></li>
<li><a href="#org1a02e30">1.1.21. 13.1.21 DROP DATABASE Syntax</a></li>
<li><a href="#org9fd4250">1.1.22. 13.1.22 DROP EVENT Syntax</a></li>
<li><a href="#orgfa3de0d">1.1.23. 13.1.23 DROP FUNCTION Syntax</a></li>
<li><a href="#orgea971e8">1.1.24. 13.1.24 DROP INDEX Syntax</a></li>
<li><a href="#org7a6002b">1.1.25. 13.1.25 DROP LOGFILE GROUP Syntax</a></li>
<li><a href="#orge35017d">1.1.26. 13.1.26 DROP PROCEDURE and DROP FUNCTION Syntax</a></li>
<li><a href="#orgf1122aa">1.1.27. 13.1.27 DROP SERVER Syntax</a></li>
<li><a href="#orge3bd3e5">1.1.28. 13.1.28 DROP TABLE Syntax</a></li>
<li><a href="#orgf122723">1.1.29. 13.1.29 DROP TABLESPACE Syntax</a></li>
<li><a href="#org8eb35aa">1.1.30. 13.1.30 DROP TRIGGER Syntax</a></li>
<li><a href="#org5bcedfe">1.1.31. 13.1.31 DROP VIEW Syntax</a></li>
<li><a href="#org22f441a">1.1.32. 13.1.32 RENAME TABLE Syntax</a></li>
<li><a href="#org780a514">1.1.33. 13.1.33 TRUNCATE TABLE Syntax</a></li>
</ul>
</li>
<li><a href="#org19c6eb7">1.2. 13.2 Data Manipulation Statements</a></li>
<li><a href="#orgd55f0dd">1.3. 13.3 MySQL Transactional and Locking Statements</a></li>
<li><a href="#org177c075">1.4. 13.4 Replication Statements</a></li>
<li><a href="#org79ba104">1.5. 13.5 SQL Syntax for Prepared Statements</a></li>
<li><a href="#orgc43e55a">1.6. 13.6 MySQL Compound-Statement Syntax</a></li>
<li><a href="#org7bfe5ae">1.7. 13.7 Database Administration Statements</a></li>
<li><a href="#org3f828f0">1.8. 13.8 MySQL Utility Statements</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-orga9429f7" class="outline-2">
<h2 id="orga9429f7"><span class="section-number-2">1</span> SQL Statement Syntax</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org7846407" class="outline-3">
<h3 id="org7846407"><span class="section-number-3">1.1</span> 13.1 Data Definition Statements</h3>
<div class="outline-text-3" id="text-1-1">
</div>
<div id="outline-container-orgc4ccf19" class="outline-4">
<h4 id="orgc4ccf19"><span class="section-number-4">1.1.1</span> 13.1.1 ALTER DATABASE Syntax</h4>
</div>
<div id="outline-container-org9e2b1e0" class="outline-4">
<h4 id="org9e2b1e0"><span class="section-number-4">1.1.2</span> 13.1.2 ALTER EVENT Syntax</h4>
</div>
<div id="outline-container-orgf62291e" class="outline-4">
<h4 id="orgf62291e"><span class="section-number-4">1.1.3</span> 13.1.3 ALTER LOGFILE GROUP Syntax</h4>
</div>
<div id="outline-container-org49f5f2f" class="outline-4">
<h4 id="org49f5f2f"><span class="section-number-4">1.1.4</span> 13.1.4 ALTER FUNCTION Syntax</h4>
</div>
<div id="outline-container-orgd3082dc" class="outline-4">
<h4 id="orgd3082dc"><span class="section-number-4">1.1.5</span> 13.1.5 ALTER PROCEDURE Syntax</h4>
</div>
<div id="outline-container-org2d3f5ea" class="outline-4">
<h4 id="org2d3f5ea"><span class="section-number-4">1.1.6</span> 13.1.6 ALTER SERVER Syntax</h4>
</div>
<div id="outline-container-org4189b59" class="outline-4">
<h4 id="org4189b59"><span class="section-number-4">1.1.7</span> 13.1.7 ALTER TABLE Syntax</h4>
</div>
<div id="outline-container-org1e312cc" class="outline-4">
<h4 id="org1e312cc"><span class="section-number-4">1.1.8</span> 13.1.8 ALTER TABLESPACE Syntax</h4>
</div>
<div id="outline-container-org5e513d6" class="outline-4">
<h4 id="org5e513d6"><span class="section-number-4">1.1.9</span> 13.1.9 ALTER VIEW Syntax</h4>
</div>
<div id="outline-container-org308d1e0" class="outline-4">
<h4 id="org308d1e0"><span class="section-number-4">1.1.10</span> 13.1.10 CREATE DATABASE Syntax</h4>
</div>
<div id="outline-container-orgf4fcaa1" class="outline-4">
<h4 id="orgf4fcaa1"><span class="section-number-4">1.1.11</span> 13.1.11 CREATE EVENT Syntax</h4>
</div>
<div id="outline-container-org6b679c4" class="outline-4">
<h4 id="org6b679c4"><span class="section-number-4">1.1.12</span> 13.1.12 CREATE FUNCTION Syntax</h4>
</div>
<div id="outline-container-orgb03ce47" class="outline-4">
<h4 id="orgb03ce47"><span class="section-number-4">1.1.13</span> 13.1.13 CREATE INDEX Syntax</h4>
</div>
<div id="outline-container-org6bd2353" class="outline-4">
<h4 id="org6bd2353"><span class="section-number-4">1.1.14</span> 13.1.14 CREATE LOGFILE GROUP Syntax</h4>
</div>
<div id="outline-container-org30c810d" class="outline-4">
<h4 id="org30c810d"><span class="section-number-4">1.1.15</span> 13.1.15 CREATE PROCEDURE and CREATE FUNCTION Syntax</h4>
</div>
<div id="outline-container-org74bfffe" class="outline-4">
<h4 id="org74bfffe"><span class="section-number-4">1.1.16</span> 13.1.16 CREATE SERVER Syntax</h4>
</div>
<div id="outline-container-org50f83b9" class="outline-4">
<h4 id="org50f83b9"><span class="section-number-4">1.1.17</span> 13.1.17 CREATE TABLE Syntax</h4>
<div class="outline-text-4" id="text-1-1-17">
</div>
<ol class="org-ol">
<li><a id="org53a37dc"></a>13.1.17.3 Using FOREIGN KEY Constraints<br />
<div class="outline-text-6" id="text-1-1-17-0-1">
<p>
MySQL supports foreign keys, which let you cross-reference related data across tables, and foreign key constraints, which help keep this spread-out data consistent. The essential syntax for a foreign key constraint definition in a CREATE TABLE or ALTER TABLE statement looks like this:
</p>

<p>
MySQL 支持外键，这有助于表间交叉引用相关数据；也支持外键约束，有助于保持广泛数据的一致性。CREATE TABLE 或 ALTER TABLE 语句中外键约束定义语法如下：
</p>

<div class="org-src-container">
<pre class="src src-mysql">[CONSTRAINT [symbol]] FOREIGN KEY
    [index_name] (index_col_name, ...)
    REFERENCES tbl_name (index_col_name,...)
    [ON DELETE reference_option]
    [ON UPDATE reference_option]

reference_option:
    RESTRICT | CASCADE | SET NULL | NO ACTION
</pre>
</div>

<p>
index_name represents a foreign key ID. The index_name value is ignored if there is already an explicitly defined index on the child table that can support the foreign key. Otherwise, MySQL implicitly creates a foreign key index that is named according to the following rules:
</p>

<p>
index_name 代表外键 ID。如果支持外键的子表上已有一个显式定义的索引，就忽略该 index_name 值，否则，MySQL 根据以下规则隐式创建一个外键索引：
</p>

<ul class="org-ul">
<li><p>
If defined, the CONSTRAINT symbol value is used. Otherwise, the FOREIGN KEY index_name value is used.
</p>

<p>
如果定义了 CONSTRAINT 符号，就使用该值。否值使用 FOREIGN KEY index_name。
</p></li>

<li><p>
If neither a CONSTRAINT symbol or FOREIGN KEY index_name is defined, the foreign key index name is generated using the name of the referencing foreign key column.
</p>

<p>
如果 CONSTRAINT symbol or FOREIGN KEY index_name 都没有定义，使用引用的外键列名生成外键索引名字。
</p></li>
</ul>

<p>
Foreign keys definitions are subject to the following conditions:
</p>

<p>
外键定义应当具备以下条件：
</p>

<ul class="org-ul">
<li><p>
Foreign key relationships involve a parent table that holds the central data values, and a child table with identical values pointing back to its parent. The FOREIGN KEY clause is specified in the child table. The parent and child tables must use the same storage engine. They must not be TEMPORARY tables.
</p>

<p>
外键关系包括父表和子表，父表包含中央数据值，子表中有相同值指向父表。外键关系在子表中指定。父表和子表必须使用同样的存储引擎，它们都不能是临时表。
</p>

<p>
In MySQL 5.6, creation of a foreign key constraint requires at least one of the SELECT, INSERT, UPDATE, DELETE, or REFERENCES privileges for the parent table as of 5.6.22.
</p>

<p>
MySQL 5.6 中，创建外键约束要求至少有父表的 SELECT, INSERT, UPDATE, DELETE, or REFERENCES 权限中的一个。
</p></li>

<li><p>
Corresponding columns in the foreign key and the referenced key must have similar data types. The size and sign of integer types must be the same. The length of string types need not be the same. For nonbinary (character) string columns, the character set and collation must be the same.
</p>

<p>
外键中相应的列和引用的键必须有类似的数据类型。整数类型的大小和符号必须要相同。string 类型长度可以有不同。非二进制字符串列，字符编码和校对必须相同。
</p></li>

<li><p>
When foreign_key_checks is enabled, which is the default setting, character set conversion is not permitted on tables that include a character string column used in a foreign key constraint. The workaround is described in Section 13.1.7, “ALTER TABLE Syntax”.
</p>

<p>
forerign_key_checks 启动时，该选项默认启动，如果表中一个字符串列用过外键约束，不允许该表进行字符集转换。13.1.7 中描述了方法。
</p></li>

<li><p>
MySQL requires indexes on foreign keys and referenced keys so that foreign key checks can be fast and not require a table scan. In the referencing table, there must be an index where the foreign key columns are listed as the first columns in the same order. Such an index is created on the referencing table automatically if it does not exist. This index might be silently dropped later, if you create another index that can be used to enforce the foreign key constraint. index_name, if given, is used as described previously.
</p>

<p>
Mysql 要求在外键和引用键上建立索引，这样不需要扫描全表就可以进行快速的外键检查。在引用表，外键列以相同顺序作为第一列必须有索引，如果不存在，引用表的时候会自动创建该索引。如果后来创建另外用于执行外键的索引，该索引可能会悄悄删除。 如果给定了 index_name,会向前面描述的一样使用。
</p></li>

<li><p>
InnoDB permits a foreign key to reference any index column or group of columns. However, in the referenced table, there must be an index where the referenced columns are listed as the first columns in the same order.
</p>

<p>
InnoDB 允许外键引用任何索引列或组合列。然而，被引用的表中，被引用的列如果同样顺序作为第一列必须要建立索引。
</p>

<p>
NDB requires an explicit unique key (or primary key) on any column referenced as a foreign key.
</p>

<p>
NDB 要求作为外键被引用的列要显式声明为 unique key（或 primary key）。
</p></li>

<li><p>
Index prefixes on foreign key columns are not supported. One consequence of this is that BLOB and TEXT columns cannot be included in a foreign key because indexes on those columns must always include a prefix length.
</p>

<p>
不支持外键列上的索引前缀。这样做的后果之一是外键不能包含 BLOB 和 TEXT 列，因为这些列上的索引总是必须要包含前缀长度。
</p></li>

<li><p>
If the CONSTRAINT symbol clause is given, the symbol value, if used, must be unique in the database. A duplicate symbol will result in an error similar to: ERROR 1022 (2300): Can't write; duplicate key in table '#sql- 464_1'. If the clause is not given, or a symbol is not included following the CONSTRAINT keyword, a name for the constraint is created automatically.
</p>

<p>
如果给出 CONSTRAINT symbol，如果被使用，符号值在数据库中必须唯一。重复的符号将会导致此类错误：ERROR 1022 (2300): Can't write; duplicate key in table '#sql- 464_1'. 如果没有给出 clause，或者 CONSTRAINT 关键字后没有符号，自动创建约束名字。
</p></li>

<li><p>
InnoDB does not currently support foreign keys for tables with user-defined partitioning. This includes both parent and child tables.
</p>

<p>
InnoDB 当前不支持用户自定义分区表上的外键。包括父表和子表。
</p>

<p>
This restriction does not apply for NDB tables that are partitioned by KEY or LINEAR KEY (the only user partitioning types supported by the NDB storage engine); these may have foreign key references or be the targets of such references.
</p>

<p>
该限制不适用与使用 KEY 或 LINEAR KEY 分区的 NDB 表（NDB 存储引擎支持的唯一分区类型）；这些可以有外键或作为外键引用的目标。
</p></li>

<li><p>
For NDB tables, ON UPDATE CASCADE is not supported where the reference is to the parent table's primary key.
</p>

<p>
对于 NDB 表，党引用不是父表的 primary key 时，不支持 ON UPDATE CACADE。
</p></li>
</ul>

<p>
<b>Referential Actions</b> （参考行为）
</p>

<p>
This section describes how foreign keys help guarantee referential integrity.
</p>

<p>
改节描述外键如何有助于保证引用完整性。
</p>

<p>
For storage engines supporting foreign keys, MySQL rejects any INSERT or UPDATE operation that attempts to create a foreign key value in a child table if there is no a matching candidate key value in the parent table.
</p>

<p>
对于支持外键的存储引擎，如果父表中没有匹配的候选键，Mysql 拒绝任何企图在子表中创建外键值的 INSERT 和 UPDATE 操作。
</p>

<p>
When an UPDATE or DELETE operation affects a key value in the parent table that has matching rows in the child table, the result depends on the referential action specified using ON UPDATE and ON DELETE subclauses of the FOREIGN KEY clause. MySQL supports five options regarding the action to be taken, listed here:
</p>

<p>
当 UPDATE 或 DELETE 操作影响父表中的键值，而这些键值在子表中有匹配行，结果取决于使用 FOREIGN KEY 条款的 ON UPDATE 和 ON DELETE 子条款指定的参考行为。mysql 对于要采取的行为支持五各选项，如下所列：
</p>

<ul class="org-ul">
<li><p>
CASCADE: Delete or update the row from the parent table, and automatically delete or update the matching rows in the child table. Both ON DELETE CASCADE and ON UPDATE CASCADE are supported. Between two tables, do not define several ON UPDATE CASCADE clauses that act on the same column in the parent table or in the child table.
</p>

<p>
CASCADE:从父表中删除或更新表，在子表中自动山删除或更新匹配的行。ON DELETE CASCADE and ON UPDATE CASCADE 都支持。两表之间，不要在父表或子表中相同的列上定义多个 ON UPDATE CASCADE 子条目。
</p>

<pre class="example">
Note
Cascaded foreign key actions do not activate triggers.

级联的外键行为不会机会触发器。
</pre></li>
</ul>


<ul class="org-ul">
<li><p>
SET NULL: Delete or update the row from the parent table, and set the foreign key column or columns in the child table to NULL. Both ON DELETE SET NULL and ON UPDATE SET NULL clauses are supported.
</p>

<p>
SET NULL：从父表中删除或更新行，在子表中将外键（组合列）设置为 NULL。同时支持 ON DELETE SET NULL and ON UPDATE SET NULL 子条目。
</p>

<p>
If you specify a SET NULL action, make sure that you have not declared the columns in the child table as NOT NULL.
</p>

<p>
如果指定一个 SET NUll 行为，确保没有将子表中的该列声明为 NOT NULL。
</p></li>

<li><p>
RESTRICT: Rejects the delete or update operation for the parent table. Specifying RESTRICT (or NO ACTION) is the same as omitting the ON DELETE or ON UPDATE clause.
</p>

<p>
RESTRICT:拒绝执行父表的删除和更新操作。作为省略 ON DELETE or ON UPDATE 条目，指定 RESTRICT (or NO ACTION)是相同的。
</p></li>

<li><p>
NO ACTION: A keyword from standard SQL. In MySQL, equivalent to RESTRICT. The MySQL Server rejects the delete or update operation for the parent table if there is a related foreign key value in the referenced table. Some database systems have deferred checks, and NO ACTION is a deferred check. In MySQL, foreign key constraints are checked immediately, so NO ACTION is the same as RESTRICT.
</p>

<p>
NO ACTION:标准 sql 关键字。Mysql 中，等于 RESTRICT。mysql 服务拒绝父表的删除和更新操作，如果被引用的表中有相关的外键值。一些数据库系统有延迟的检查，NO ACTION 就是一个延迟的检查。Mysql 中，立即检查外键约束，所以有 NO ACTION 和 RESTRICT 是一样的。
</p></li>

<li><p>
SET DEFAULT: This action is recognized by the MySQL parser, but both InnoDB and NDB reject table definitions containing ON DELETE SET DEFAULT or ON UPDATE SET DEFAULT clauses.
</p>

<p>
SET DEFAULT:mysql 解析器识别该操作，但 InnoDB 和 NDB 拒绝包含 ON DELETE SET DEFAULT or ON UPDATE SET DEFAULT 条目的表定义。
</p></li>
</ul>

<p>
For an ON DELETE or ON UPDATE that is not specified, the default action is always RESTRICT.
</p>

<p>
没有指定 ON DELETE or ON UPDATE 的默认操作是 RESTRICT。
</p>

<p>
MySQL supports foreign key references between one column and another within a table. (A column cannot have a foreign key reference to itself.) In these cases, “child table records” really refers to dependent records within the same table.
</p>

<p>
Mysql 支持表内的列间的外键引用（列不能使用外键引用自身）。这种情况喜爱,“子表引用记录列”实际上指向同表综的依赖记录。
</p>

<p>
<b>Examples of Foreign Key Clauses</b> （外键条目举例）
</p>

<p>
Here is a simple example that relates parent and child tables through a single-column foreign key:
</p>

<p>
此处的简单例子使用单列外键关联父表和子表。
</p>

<div class="org-src-container">
<pre class="src src-sql"><span style="color: #a1db00;">CREATE</span> <span style="color: #a1db00;">TABLE</span> <span style="color: #ffd700;">parent</span> (
    id <span style="color: #00d7af;">INT</span> <span style="color: #a1db00;">NOT</span> <span style="color: #a1db00;">NULL</span>,
    <span style="color: #a1db00;">PRIMARY</span> <span style="color: #a1db00;">KEY</span> (id)
) ENGINE=INNODB;

<span style="color: #a1db00;">CREATE</span> <span style="color: #a1db00;">TABLE</span> <span style="color: #ffd700;">child</span> (
    id <span style="color: #00d7af;">INT</span>,
    parent_id <span style="color: #00d7af;">INT</span>,
    INDEX par_ind (parent_id),
    <span style="color: #a1db00;">FOREIGN</span> <span style="color: #a1db00;">KEY</span> (parent_id)
        <span style="color: #a1db00;">REFERENCES</span> parent(id)
        <span style="color: #a1db00;">ON</span> <span style="color: #a1db00;">DELETE</span> <span style="color: #a1db00;">CASCADE</span>
) ENGINE=INNODB;
</pre>
</div>


<p>
A more complex example in which a product_order table has foreign keys for two other tables. One foreign key references a two-column index in the product table. The other references a single-column index in the customer table:
</p>

<p>
更复杂的例子：product_order 表中有两个表的外键。一个外键引用了 product 表的两个列组成的索引，另一个 custom 表中的单列索引。
</p>

<div class="org-src-container">
<pre class="src src-sql"><span style="color: #a1db00;">CREATE</span> <span style="color: #a1db00;">TABLE</span> <span style="color: #ffd700;">product</span> (
    category <span style="color: #00d7af;">INT</span> <span style="color: #a1db00;">NOT</span> <span style="color: #a1db00;">NULL</span>, id <span style="color: #00d7af;">INT</span> <span style="color: #a1db00;">NOT</span> <span style="color: #a1db00;">NULL</span>,
    price <span style="color: #00d7af;">DECIMAL</span>,
    <span style="color: #a1db00;">PRIMARY</span> <span style="color: #a1db00;">KEY</span>(category, id)
)   ENGINE=INNODB;

<span style="color: #a1db00;">CREATE</span> <span style="color: #a1db00;">TABLE</span> <span style="color: #ffd700;">customer</span> (
    id <span style="color: #00d7af;">INT</span> <span style="color: #a1db00;">NOT</span> <span style="color: #a1db00;">NULL</span>,
    <span style="color: #a1db00;">PRIMARY</span> <span style="color: #a1db00;">KEY</span> (id)
)   ENGINE=INNODB;

<span style="color: #a1db00;">CREATE</span> <span style="color: #a1db00;">TABLE</span> <span style="color: #ffd700;">product_order</span> (
    <span style="color: #a1db00;">no</span> <span style="color: #00d7af;">INT</span> <span style="color: #a1db00;">NOT</span> <span style="color: #a1db00;">NULL</span> AUTO_INCREMENT,
    product_category <span style="color: #00d7af;">INT</span> <span style="color: #a1db00;">NOT</span> <span style="color: #a1db00;">NULL</span>,
    product_id <span style="color: #00d7af;">INT</span> <span style="color: #a1db00;">NOT</span> <span style="color: #a1db00;">NULL</span>,
    customer_id <span style="color: #00d7af;">INT</span> <span style="color: #a1db00;">NOT</span> <span style="color: #a1db00;">NULL</span>,

    <span style="color: #a1db00;">PRIMARY</span> <span style="color: #a1db00;">KEY</span>(<span style="color: #a1db00;">no</span>),
    INDEX (product_category, product_id),
    INDEX (customer_id),

    <span style="color: #a1db00;">FOREIGN</span> <span style="color: #a1db00;">KEY</span> (product_category, product_id)
      <span style="color: #a1db00;">REFERENCES</span> product(category, id)
      <span style="color: #a1db00;">ON</span> <span style="color: #a1db00;">UPDATE</span> <span style="color: #a1db00;">CASCADE</span> <span style="color: #a1db00;">ON</span> <span style="color: #a1db00;">DELETE</span> <span style="color: #a1db00;">RESTRICT</span>,

    <span style="color: #a1db00;">FOREIGN</span> <span style="color: #a1db00;">KEY</span> (customer_id)
      <span style="color: #a1db00;">REFERENCES</span> customer(id)
)   ENGINE=INNODB;
</pre>
</div>


<p>
<b>Adding foreign keys</b> （添加外键）
</p>

<p>
You can add a new foreign key constraint to an existing table by using ALTER TABLE. The syntax relating to foreign keys for this statement is shown here:
</p>

<p>
可以使用 ALTER TABLE 向现有表添加外键约束。和外键相关显式和如下：
</p>

<div class="org-src-container">
<pre class="src src-sql"><span style="color: #a1db00;">ALTER</span> <span style="color: #a1db00;">TABLE</span> <span style="color: #ffd700;">tbl_name</span>
    <span style="color: #a1db00;">ADD</span> [<span style="color: #a1db00;">CONSTRAINT</span> [symbol]] <span style="color: #a1db00;">FOREIGN</span> <span style="color: #a1db00;">KEY</span>
    [index_name] (index_col_name, ...)
    <span style="color: #a1db00;">REFERENCES</span> tbl_name (index_col_name,...)
    [<span style="color: #a1db00;">ON</span> <span style="color: #a1db00;">DELETE</span> reference_option]
    [<span style="color: #a1db00;">ON</span> <span style="color: #a1db00;">UPDATE</span> reference_option]
</pre>
</div>


<p>
The foreign key can be self referential (referring to the same table). When you add a foreign key constraint to a table using ALTER TABLE, remember to create the required indexes first.
</p>

<p>
外键可以是字引用的（引用相同的表）。使用 ALTER TABLE 添加外键约束时，记得先创建所需的索引。
</p>

<p>
<b>Dropping Foreign Keys</b> (删除外键)
</p>

<p>
You can also use ALTER TABLE to drop foreign keys, using the syntax shown here:
</p>

<p>
还可以使用 ALTER TABLE 删除外键，使用如下语法：
</p>

<div class="org-src-container">
<pre class="src src-sql"><span style="color: #a1db00;">ALTER</span> <span style="color: #a1db00;">TABLE</span> <span style="color: #ffd700;">tbl_name</span> <span style="color: #a1db00;">DROP</span> <span style="color: #a1db00;">FOREIGN</span> <span style="color: #a1db00;">KEY</span> fk_symbol;
</pre>
</div>

<p>
If the FOREIGN KEY clause included a CONSTRAINT name when you created the foreign key, you can refer to that name to drop the foreign key. Otherwise, the fk_symbol value is generated internally when the foreign key is created. To find out the symbol value when you want to drop a foreign key, use a SHOW CREATE TABLE statement, as shown here:
</p>

<p>
	如果创建外键的时候 FOREIGN KEY 子条目包含 CONSTRAINT 名字，可以引用该名字删除外键。否则，创建外键时自内部自动创建 fk_symbol。使用 SHOW CREATE TABLE 语句查找想要删除的外键的符号值，如下所示：
	#+BEGIN_SRC sh
mysql&gt; SHOW CREATE TABLE ibtest11c\G
</p>
</div>
<ol class="org-ol">
<li><a id="orgf1faa08"></a>1. row <b><b><b><b><b><b><b><b><b><b><b><b><b>*</b></b></b></b></b></b></b></b></b></b></b></b></b><br />
<div class="outline-text-28" id="text-1-1-17-0-1-0-0-0-0-0-0-0-0-0-0-0-0-0-0">
<p>
       Table: ibtest11c
Create Table: CREATE TABLE `ibtest11c` (
  `A` int(11) NOT NULL auto_increment,
  `D` int(11) NOT NULL default '0',
  `B` varchar(200) NOT NULL default '',
  `C` varchar(175) default NULL,
  PRIMARY KEY  (`A`,`D`,`B`),
  KEY `B` (`B`,`C`),
  KEY `C` (`C`),
  CONSTRAINT `0_38775` FOREIGN KEY (`A`, `D`)
REFERENCES `ibtest11a` (`A`, `D`)
ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `0_38776` FOREIGN KEY (`B`, `C`)
REFERENCES `ibtest11a` (`B`, `C`)
ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=INNODB CHARSET=latin1
1 row in set (0.01 sec)
</p>

<p>
mysql&gt; ALTER TABLE ibtest11c DROP FOREIGN KEY `0_38775`;
	#+END_SRC
</p>

<p>
Prior to MySQL 5.6.6, adding and dropping a foreign key in the same ALTER TABLE statement may be problematic in some cases and is therefore unsupported. Separate statements should be used for each operation. As of MySQL 5.6.6, adding and dropping a foreign key in the same ALTER TABLE statement is supported for ALTER TABLE &#x2026; ALGORITHM=INPLACE but remains unsupported for ALTER TABLE &#x2026; ALGORITHM=COPY.
</p>

<p>
mysql 5.6.5 之前，同一 ALTER TABLE 语句中添加和删除外键某些情况可能会问题，因为没有值贺词。每个操作使用单独的语句。mysql 5.6.6，ALTER TABLE &#x2026; ALGORITHM=INPLACE 支持同一 ALTER TABLE 语句中添加和删除外键，但 ALTER TABLE &#x2026; ALGORITHM=COPY 不支持。
</p>

<p>
Before MySQL 5.6.7, using ALTER TABLE to change the definition of a foreign key column could cause a loss of referential integrity. For example, changing a foreign key column that contained NULL values to be NOT NULL caused the NULL values to be the empty string. Similarly, an ALTER TABLE IGNORE that removed rows in a parent table could break referential integrity.
</p>

<p>
As of 5.6.7, the server prohibits changes to foreign key columns with the potential to cause loss of referential integrity. A workaround is to use ALTER TABLE &#x2026; DROP FOREIGN KEY before changing the column definition and ALTER TABLE &#x2026; ADD FOREIGN KEY afterward.
</p>

<p>
<b>Foreign Keys and Other MySQL Statements</b>
</p>


<p>
Table and column identifiers in a FOREIGN KEY &#x2026; REFERENCES &#x2026; clause can be quoted within backticks (`). Alternatively, double quotation marks (") can be used if the ANSI_QUOTES SQL mode is enabled. The setting of the lower_case_table_names system variable is also taken into account.
</p>

<p>
FOREIGN KEY &#x2026; REFERENCES &#x2026; 条目中定义的表和列标识符可以使用反引号。或者如果启用 ANSI_QUOTES SQL 模式也可以使用双引号。系统变量 lower_case_table_names 也要考虑在内。
</p>

<p>
You can view a child table's foreign key definitions as part of the output of the SHOW CREATE TABLE statement:
</p>

<p>
在 SHOW CREATE TABLE 语句输出部分中查看子表的外键定义。
</p>

<div class="org-src-container">
<pre class="src src-sql">SHOW <span style="color: #a1db00;">CREATE</span> <span style="color: #a1db00;">TABLE</span> tbl_name;
</pre>
</div>


<p>
You can also obtain information about foreign keys by querying the INFORMATION_SCHEMA.KEY_COLUMN_USAGE table.
</p>

<p>
通过查询 INFORMATION_SCHEMA.KEY_COLUMN_USAGE table 了解有关外键的更多信息。
</p>

<p>
You can find information about foreign keys used by InnoDB tables in the INNODB_SYS_FOREIGN and INNODB_SYS_FOREIGN_COLS tables, also in the INFORMATION_SCHEMA database.
</p>

<p>
在 INNODB_SYS_FOREIGN and INNODB_SYS_FOREIGN_COLS 中查看 InnoDB 表使用的外键信息，INFORMATION_SCHEMA 数据库中也可以看到。
</p>


<p>
mysqldump produces correct definitions of tables in the dump file, including the foreign keys for child tables.
</p>

<p>
mysqldump 在转储文件中产生表的正确信息，包括子表的外键。
</p>

<p>
To make it easier to reload dump files for tables that have foreign key relationships, mysqldump automatically includes a statement in the dump output to set foreign_key_checks to 0. This avoids problems with tables having to be reloaded in a particular order when the dump is reloaded. It is also possible to set this variable manually:
</p>

<p>
为了更容易的加载包含外键关系的表的转储文件，mysqldump 在转储输出中自动包含语句将 forerign_key_checks 设置为 0。 这避免了加载转储时表必须以特定顺序加载的问题。也可以手动设置这个变量：
</p>

<div class="org-src-container">
<pre class="src src-sh">mysql&gt; SET foreign_key_checks = 0;
mysql&gt; SOURCE dump_file_name;
mysql&gt; SET foreign_key_checks = 1;
</pre>
</div>

<p>
This enables you to import the tables in any order if the dump file contains tables that are not correctly ordered for foreign keys. It also speeds up the import operation. Setting foreign_key_checks to 0 can also be useful for ignoring foreign key constraints during LOAD DATA and ALTER TABLE operations. However, even if foreign_key_checks = 0, MySQL does not permit the creation of a foreign key constraint where a column references a nonmatching column type. Also, if a table has foreign key constraints, ALTER TABLE cannot be used to alter the table to use another storage engine. To change the storage engine, you must drop any foreign key constraints first.
</p>

<p>
如果转储文件包含的表没有针对正确排序，这样就可以任意顺序导入表。这同样加快了导入操作。foreign_key_checks 设置为 0 同样有助于在 LOAD DATA and ALTER TABLE 操作中忽略外键约束。然而，即使 foreign_key_checks = 0，mysql 不允许创建列引用了不匹配的类类型的外键约束。同样，如果一个表包含外键约束，不能使用 ALTER TABLE 修改表的存储引擎。为了修改存储引擎，必须要先删除外键约束。
</p>

<p>
You cannot issue DROP TABLE for a table that is referenced by a FOREIGN KEY constraint, unless you do SET foreign_key_checks = 0. When you drop a table, any constraints that were defined in the statement used to create that table are also dropped.
</p>

<p>
不可以删除被外键约束引用的表，除非将 foreign_key_checks 设置为。删除表时，创建该表时定义的所有约束都会被删除。
</p>

<p>
If you re-create a table that was dropped, it must have a definition that conforms to the foreign key constraints referencing it. It must have the correct column names and types, and it must have indexes on the referenced keys, as stated earlier. If these are not satisfied, MySQL returns Error 1005 and refers to Error 150 in the error message, which means that a foreign key constraint was not correctly formed. Similarly, if an ALTER TABLE fails due to Error 150, this means that a foreign key definition would be incorrectly formed for the altered table.
</p>

<p>
如果重建删除的表，它必须有一个保证外键约束引用到它的定义。它必须有正确的列名和类型，必须索引被引用的键。如果不满足这些，mysql 将会返回 1005 错误，在错误信息中指向 150 错误，意味这外键约束没有正确的形成。类似的，如果 ALTER TABLE 由于错误 150 失败，这意味修改的表没有正确形成外键定义。
</p>

<p>
For InnoDB tables, you can obtain a detailed explanation of the most recent InnoDB foreign key error in the MySQL Server, by checking the output of SHOW ENGINE INNODB STATUS.
</p>

<p>
对于 InnoDB 表，可以通过 检查 SHOW ENGINE INNODB STATUS 的输出，获取关于大多数 mysql 服务端最近 InnoDB 外键错误更详细的解释。
</p>

<blockquote>
<p>
Important
</p>

<p>
For users familiar with the ANSI/ISO SQL Standard, please note that no storage engine, including InnoDB, recognizes or enforces the MATCH clause used in referential-integrity constraint definitions. Use of an explicit MATCH clause will not have the specified effect, and also causes ON DELETE and ON UPDATE clauses to be ignored. For these reasons, specifying MATCH should be avoided.
</p>

<p>
The MATCH clause in the SQL standard controls how NULL values in a composite (multiple-column) foreign key are handled when comparing to a primary key. MySQL essentially implements the semantics defined by MATCH SIMPLE, which permit a foreign key to be all or partially NULL. In that case, the (child table) row containing such a foreign key is permitted to be inserted, and does not match any row in the referenced (parent) table. It is possible to implement other semantics using triggers.
</p>

<p>
Additionally, MySQL requires that the referenced columns be indexed for performance reasons. However, the system does not enforce a requirement that the referenced columns be UNIQUE or be declared NOT NULL. The handling of foreign key references to nonunique keys or keys that contain NULL values is not well defined for operations such as UPDATE or DELETE CASCADE. You are advised to use foreign keys that reference only UNIQUE (including PRIMARY) and NOT NULL keys.
</p>

<p>
Furthermore, MySQL parses but ignores “inline REFERENCES specifications” (as defined in the SQL standard) where the references are defined as part of the column specification. MySQL accepts REFERENCES clauses only when specified as part of a separate FOREIGN KEY specification. For storage engines that do not support foreign keys (such as MyISAM), MySQL Server parses and ignores foreign key specifications.
</p>
</blockquote>
</div>
</li>
</ol>
</li>
</ol>
</div>


<div id="outline-container-org306e5aa" class="outline-4">
<h4 id="org306e5aa"><span class="section-number-4">1.1.18</span> 13.1.18 CREATE TABLESPACE Syntax</h4>
</div>
<div id="outline-container-orge564291" class="outline-4">
<h4 id="orge564291"><span class="section-number-4">1.1.19</span> 13.1.19 CREATE TRIGGER Syntax</h4>
</div>
<div id="outline-container-org1889df2" class="outline-4">
<h4 id="org1889df2"><span class="section-number-4">1.1.20</span> 13.1.20 CREATE VIEW Syntax</h4>
</div>
<div id="outline-container-org1a02e30" class="outline-4">
<h4 id="org1a02e30"><span class="section-number-4">1.1.21</span> 13.1.21 DROP DATABASE Syntax</h4>
</div>
<div id="outline-container-org9fd4250" class="outline-4">
<h4 id="org9fd4250"><span class="section-number-4">1.1.22</span> 13.1.22 DROP EVENT Syntax</h4>
</div>
<div id="outline-container-orgfa3de0d" class="outline-4">
<h4 id="orgfa3de0d"><span class="section-number-4">1.1.23</span> 13.1.23 DROP FUNCTION Syntax</h4>
</div>
<div id="outline-container-orgea971e8" class="outline-4">
<h4 id="orgea971e8"><span class="section-number-4">1.1.24</span> 13.1.24 DROP INDEX Syntax</h4>
</div>
<div id="outline-container-org7a6002b" class="outline-4">
<h4 id="org7a6002b"><span class="section-number-4">1.1.25</span> 13.1.25 DROP LOGFILE GROUP Syntax</h4>
</div>
<div id="outline-container-orge35017d" class="outline-4">
<h4 id="orge35017d"><span class="section-number-4">1.1.26</span> 13.1.26 DROP PROCEDURE and DROP FUNCTION Syntax</h4>
</div>
<div id="outline-container-orgf1122aa" class="outline-4">
<h4 id="orgf1122aa"><span class="section-number-4">1.1.27</span> 13.1.27 DROP SERVER Syntax</h4>
</div>
<div id="outline-container-orge3bd3e5" class="outline-4">
<h4 id="orge3bd3e5"><span class="section-number-4">1.1.28</span> 13.1.28 DROP TABLE Syntax</h4>
</div>
<div id="outline-container-orgf122723" class="outline-4">
<h4 id="orgf122723"><span class="section-number-4">1.1.29</span> 13.1.29 DROP TABLESPACE Syntax</h4>
</div>
<div id="outline-container-org8eb35aa" class="outline-4">
<h4 id="org8eb35aa"><span class="section-number-4">1.1.30</span> 13.1.30 DROP TRIGGER Syntax</h4>
</div>
<div id="outline-container-org5bcedfe" class="outline-4">
<h4 id="org5bcedfe"><span class="section-number-4">1.1.31</span> 13.1.31 DROP VIEW Syntax</h4>
</div>
<div id="outline-container-org22f441a" class="outline-4">
<h4 id="org22f441a"><span class="section-number-4">1.1.32</span> 13.1.32 RENAME TABLE Syntax</h4>
</div>
<div id="outline-container-org780a514" class="outline-4">
<h4 id="org780a514"><span class="section-number-4">1.1.33</span> 13.1.33 TRUNCATE TABLE Syntax</h4>
</div>
</div>

<div id="outline-container-org19c6eb7" class="outline-3">
<h3 id="org19c6eb7"><span class="section-number-3">1.2</span> 13.2 Data Manipulation Statements</h3>
</div>
<div id="outline-container-orgd55f0dd" class="outline-3">
<h3 id="orgd55f0dd"><span class="section-number-3">1.3</span> 13.3 MySQL Transactional and Locking Statements</h3>
</div>
<div id="outline-container-org177c075" class="outline-3">
<h3 id="org177c075"><span class="section-number-3">1.4</span> 13.4 Replication Statements</h3>
</div>
<div id="outline-container-org79ba104" class="outline-3">
<h3 id="org79ba104"><span class="section-number-3">1.5</span> 13.5 SQL Syntax for Prepared Statements</h3>
</div>
<div id="outline-container-orgc43e55a" class="outline-3">
<h3 id="orgc43e55a"><span class="section-number-3">1.6</span> 13.6 MySQL Compound-Statement Syntax</h3>
</div>
<div id="outline-container-org7bfe5ae" class="outline-3">
<h3 id="org7bfe5ae"><span class="section-number-3">1.7</span> 13.7 Database Administration Statements</h3>
</div>
<div id="outline-container-org3f828f0" class="outline-3">
<h3 id="org3f828f0"><span class="section-number-3">1.8</span> 13.8 MySQL Utility Statements</h3>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: 刘尚亮</p>
<p class="email">Email: <a href="mailto:phenix3443@gmail.com">phenix3443@gmail.com</a></p>
<p class="date">Created: 2020-03-05 四 17:01</p>
<p class="validation"></p>
</div>
</body>
</html>
